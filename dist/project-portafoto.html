<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Portafoto LED — Project</title>
  <meta name="description" content="Cornice portafoto stampata in 3D con illuminazione LED. Modello 3D ruotabile, galleria immagini e file STL separati.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="css/styles.css" rel="stylesheet"/>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer@3.4.0/dist/model-viewer.min.js"></script>

  <style>
    .section-narrow { max-width: 980px; margin: 0 auto; }

    .model-frame{
      background: radial-gradient(1200px 400px at 50% -100px, #1f2937 0%, #0b1020 70%);
      border-radius:.75rem; padding:10px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
    }
    model-viewer{
      width:100%; height:320px; border-radius:.5rem; display:block;
      --poster-color: transparent;
      background:#0b1020;
      outline:none;
    }
    @media (max-width:768px){ model-viewer{ height:240px; } }

    img{
      max-width:100%; height:auto; display:block;
      border-radius:.5rem; object-fit:cover; cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }

    section{ margin-bottom:2.25rem; }

    @media (max-width:768px){ 
      section{ margin-bottom:1.35rem; } 
    }

    .gallery-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:1rem;
    }

    /* Lightbox */
    .lightbox{
      display:none;
      position:fixed;
      inset:0;
      z-index:1050;
      background:rgba(0,0,0,.9);
      justify-content:center;
      align-items:center;
      flex-direction:column;
    }
    .lightbox.active{ display:flex; }

    .lightbox img{
      max-width:90%;
      max-height:80vh;
      object-fit:contain;
      border-radius:.5rem;
      box-shadow:0 0 20px rgba(255,255,255,.2);
    }

    .lightbox button{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:rgba(255,255,255,.3);
      border:none;
      color:#fff;
      font-size:2rem;
      padding:.5rem .9rem;
      border-radius:50%;
      cursor:pointer;
    }
    .lightbox .prev{ left:5%; }
    .lightbox .next{ right:5%; }
    .lightbox .close{
      top:5%;
      right:5%;
      transform:none;
      font-size:1.8rem;
      background:rgba(255,255,255,.25);
    }
  </style>
</head>

<body>
<nav class="navbar navbar-expand-lg bg-secondary text-uppercase">
  <div class="container">
    <a class="navbar-brand text-white" href="index.html#portfolio">← Back to Portfolio</a>
  </div>
</nav>

<header class="py-5 bg-primary text-white text-center">
  <div class="container">
    <h1 class="mb-2">Portafoto con LED</h1>
    <p class="lead mb-0">
      Cornice portafoto stampata in 3D, composta da tre parti: cornice frontale, retro e base inferiore.
      Progettata per integrare un sistema LED e creare un effetto luminoso uniforme attorno alla fotografia.
    </p>
  </div>
</header>

<main class="container my-4">

  <!-- 3D MODEL -->
  <section class="section-narrow">
    <h2 class="h4 mb-3">3D Model (rotate me)</h2>
    <div class="model-frame">
      <model-viewer
        src="assets/3d/portafoto.glb"
        camera-controls
        auto-rotate
        reveal="auto"
        crossorigin="anonymous"
        environment-image="neutral"
        shadow-intensity="1"
        shadow-softness="0.9"
        exposure="0.9"
        camera-orbit="0deg 70deg 110%"
        field-of-view="35deg"
        alt="3D model of the LED picture frame">
      </model-viewer>
    </div>
  </section>

  <!-- GALLERY -->
  <section class="section-narrow">
    <h2 class="h4 mb-3">Photo Gallery</h2>

    <div class="gallery-grid">
      <img src="assets/img/portfolio/portafoto-1.jpeg" alt="Portafoto LED - foto 1">
      <img src="assets/img/portfolio/portafoto-2.jpeg" alt="Portafoto LED - foto 2">
      <img src="assets/img/portfolio/portafoto-3.jpeg" alt="Portafoto LED - foto 3">
    </div>
  </section>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox">
    <button class="prev">&#10094;</button>
    <img id="lightbox-img" src="" alt="Expanded">
    <button class="next">&#10095;</button>
    <button class="close">&times;</button>
  </div>

  <!-- DOWNLOAD STL -->
  <section class="section-narrow mb-0">
    <h2 class="h4 mb-3">Downloads</h2>
    <p class="text-muted">I tre componenti separati pronti per la stampa 3D:</p>

    <ul class="list-unstyled">
      <li><a href="assets/stl/portafoto-cornice.stl" download>Cornice frontale (.stl)</a></li>
      <li><a href="assets/stl/portafoto-retro.stl" download>Retro (.stl)</a></li>
      <li><a href="assets/stl/portafoto-base.stl" download>Base inferiore (.stl)</a></li>
    </ul>
  </section>

</main>

<footer class="text-center py-4 bg-light">
  <div class="container">
    <a href="index.html#portfolio" class="btn btn-primary">← Back to Portfolio</a>
  </div>
</footer>

<script>
  /* LIGHTBOX */
  const lightbox = document.getElementById('lightbox');
  const imgBox = document.getElementById('lightbox-img');
  const imgs = document.querySelectorAll('.gallery-grid img');
  let current = 0;

  imgs.forEach((el, i) => {
    el.addEventListener('click', () => { current = i; openLightbox(); });
  });

  function openLightbox(){ lightbox.classList.add('active'); show(); }
  function show(){ imgBox.src = imgs[current].src; }

  document.querySelector('.lightbox .close').onclick = () => lightbox.classList.remove('active');
  document.querySelector('.lightbox .prev').onclick = () => { current = (current - 1 + imgs.length) % imgs.length; show(); };
  document.querySelector('.lightbox .next').onclick = () => { current = (current + 1) % imgs.length; show(); };

  lightbox.addEventListener('click', e => { if(e.target === lightbox){ lightbox.classList.remove('active'); } });

  /* COLORA IL MODELLO 3D (blu come il sito) */
  const mv = document.querySelector('model-viewer');
  mv.addEventListener('load', () => {
    const mats = mv.model && mv.model.materials ? mv.model.materials : [];
    mats.forEach(m => {
      m.pbrMetallicRoughness.setBaseColorFactor([0.098, 0.463, 0.824, 1.0]); /* blu */
      m.pbrMetallicRoughness.setMetallicFactor(0.1);
      m.pbrMetallicRoughness.setRoughnessFactor(0.6);
    });
  });
</script>

</body>
</html>
